# mongo.conf
smallfiles={{ mongod_smallfiles }}
storageEngine={{ mongod_storage_engine }}

#where to log
{% if ansible_os_family == "RedHat" %}
logpath=/var/log/mongo/mongod-{{ mongod_port }}.log
# fork and run in background
fork = true
{% endif %}
{% if ansible_os_family == "Debian" %}
logpath=/var/log/mongodb/mongod-{{ mongod_port }}.log
# fork and run in background
fork = false
{% endif %}

logappend=true


port = {{ mongod_port }}

dbpath={{ mongod_datadir_prefix }}/mongo-{{ mongod_port }}

{% if mongod_use_key %}
keyFile={{ mongod_datadir_prefix }}/secret
{% endif %}

# location of pidfile
pidfilepath = {{ mongod_datadir_prefix }}/mongod_{{ mongod_port }}.pid


# Ping interval for Mongo monitoring server.
#mms-interval = <seconds>

# Replication Options
{% if mongod_replication %}
replSet={{ mongod_replset_name | default(mongod_port) }}
{% endif %}

bind_ip={{ mongod_bind_ip }}

{% if mongod_auth is defined %}
auth={{ mongod_auth }}
{% endif %}
